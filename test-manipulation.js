// const results = [
//   {
//     placed_by: "YB9930",
//     order_id: "221128100065855",
//     exchange_order_id: "1300000000440835",
//     parent_order_id: null,
//     status: "COMPLETE",
//     status_message: null,
//     status_message_raw: null,
//     order_timestamp: "2022-11-28 09:16:00",
//     exchange_update_timestamp: "2022-11-28 09:16:00",
//     exchange_timestamp: "2022-11-28 09:16:00",
//     variety: "regular",
//     modified: false,
//     exchange: "NSE",
//     tradingsymbol: "TATAMOTORS",
//     instrument_token: 884737,
//     order_type: "LIMIT",
//     transaction_type: "BUY",
//     validity: "DAY",
//     validity_ttl: 0,
//     product: "MIS",
//     quantity: 1,
//     disclosed_quantity: 0,
//     price: 437.05,
//     trigger_price: 0,
//     average_price: 436.65,
//     filled_quantity: 1,
//     pending_quantity: 0,
//     cancelled_quantity: 0,
//     market_protection: 0,
//     meta: {},
//     tag: null,
//     guid: "21529XNkBxHUUY8U54",
//   },
//   {
//     placed_by: "YB9930",
//     order_id: "221128100065860",
//     exchange_order_id: "1300000000440849",
//     parent_order_id: null,
//     status: "COMPLETE",
//     status_message: null,
//     status_message_raw: null,
//     order_timestamp: "2022-11-28 09:16:00",
//     exchange_update_timestamp: "2022-11-28 09:16:00",
//     exchange_timestamp: "2022-11-28 09:16:00",
//     variety: "regular",
//     modified: false,
//     exchange: "NSE",
//     tradingsymbol: "SBIN",
//     instrument_token: 779521,
//     order_type: "LIMIT",
//     transaction_type: "BUY",
//     validity: "DAY",
//     validity_ttl: 0,
//     product: "MIS",
//     quantity: 1,
//     disclosed_quantity: 0,
//     price: 606.35,
//     trigger_price: 0,
//     average_price: 606.35,
//     filled_quantity: 1,
//     pending_quantity: 0,
//     cancelled_quantity: 0,
//     market_protection: 0,
//     meta: {},
//     tag: null,
//     guid: "21529XlBSb1KG3YIsO",
//   },
//   {
//     placed_by: "YB9930",
//     order_id: "221128100112016",
//     exchange_order_id: "1300000000861530",
//     parent_order_id: null,
//     status: "COMPLETE",
//     status_message: null,
//     status_message_raw: null,
//     order_timestamp: "2022-11-28 09:18:22",
//     exchange_update_timestamp: "2022-11-28 09:18:22",
//     exchange_timestamp: "2022-11-28 09:18:22",
//     variety: "regular",
//     modified: false,
//     exchange: "NSE",
//     tradingsymbol: "SBIN",
//     instrument_token: 779521,
//     order_type: "MARKET",
//     transaction_type: "SELL",
//     validity: "DAY",
//     validity_ttl: 0,
//     product: "MIS",
//     quantity: 1,
//     disclosed_quantity: 0,
//     price: 0,
//     trigger_price: 0,
//     average_price: 606.2,
//     filled_quantity: 1,
//     pending_quantity: 0,
//     cancelled_quantity: 0,
//     market_protection: 0,
//     meta: {},
//     tag: null,
//     guid: "01XO614M1AXztzM",
//   },
//   {
//     placed_by: "YB9930",
//     order_id: "221128100113146",
//     exchange_order_id: "1300000000871253",
//     parent_order_id: null,
//     status: "COMPLETE",
//     status_message: null,
//     status_message_raw: null,
//     order_timestamp: "2022-11-28 09:18:25",
//     exchange_update_timestamp: "2022-11-28 09:18:25",
//     exchange_timestamp: "2022-11-28 09:18:25",
//     variety: "regular",
//     modified: false,
//     exchange: "NSE",
//     tradingsymbol: "TATAMOTORS",
//     instrument_token: 884737,
//     order_type: "MARKET",
//     transaction_type: "SELL",
//     validity: "DAY",
//     validity_ttl: 0,
//     product: "MIS",
//     quantity: 1,
//     disclosed_quantity: 0,
//     price: 0,
//     trigger_price: 0,
//     average_price: 436.25,
//     filled_quantity: 1,
//     pending_quantity: 0,
//     cancelled_quantity: 0,
//     market_protection: 0,
//     meta: {},
//     tag: null,
//     guid: "01XJi2vcqmN8hBU",
//   },
//   {
//     placed_by: "YB9930",
//     order_id: "221128100122985",
//     exchange_order_id: "1300000000954645",
//     parent_order_id: null,
//     status: "COMPLETE",
//     status_message: null,
//     status_message_raw: null,
//     order_timestamp: "2022-11-28 09:19:00",
//     exchange_update_timestamp: "2022-11-28 09:19:00",
//     exchange_timestamp: "2022-11-28 09:19:00",
//     variety: "regular",
//     modified: false,
//     exchange: "NSE",
//     tradingsymbol: "SBIN",
//     instrument_token: 779521,
//     order_type: "LIMIT",
//     transaction_type: "BUY",
//     validity: "DAY",
//     validity_ttl: 0,
//     product: "MIS",
//     quantity: 1,
//     disclosed_quantity: 0,
//     price: 607.1,
//     trigger_price: 0,
//     average_price: 606.85,
//     filled_quantity: 1,
//     pending_quantity: 0,
//     cancelled_quantity: 0,
//     market_protection: 0,
//     meta: {},
//     tag: null,
//     guid: "21529XxW98uk6W6uNf",
//   },
//   {
//     placed_by: "YB9930",
//     order_id: "221128100122995",
//     exchange_order_id: "1300000000954657",
//     parent_order_id: null,
//     status: "COMPLETE",
//     status_message: null,
//     status_message_raw: null,
//     order_timestamp: "2022-11-28 09:19:00",
//     exchange_update_timestamp: "2022-11-28 09:19:00",
//     exchange_timestamp: "2022-11-28 09:19:00",
//     variety: "regular",
//     modified: false,
//     exchange: "NSE",
//     tradingsymbol: "TATAMOTORS",
//     instrument_token: 884737,
//     order_type: "LIMIT",
//     transaction_type: "BUY",
//     validity: "DAY",
//     validity_ttl: 0,
//     product: "MIS",
//     quantity: 1,
//     disclosed_quantity: 0,
//     price: 436.45,
//     trigger_price: 0,
//     average_price: 436.4,
//     filled_quantity: 1,
//     pending_quantity: 0,
//     cancelled_quantity: 0,
//     market_protection: 0,
//     meta: {},
//     tag: null,
//     guid: "21529XuuTvajrQ9bQj",
//   },
// ];

const results = [
  {
    placed_by: "YB9930",
    order_id: "221128100065855",
    exchange_order_id: "1300000000440835",
    parent_order_id: null,
    status: "COMPLETE",
    status_message: null,
    status_message_raw: null,
    order_timestamp: "2022-11-28 09:16:00",
    exchange_update_timestamp: "2022-11-28 09:16:00",
    exchange_timestamp: "2022-11-28 09:16:00",
    variety: "regular",
    modified: false,
    exchange: "NSE",
    tradingsymbol: "TATAMOTORS",
    instrument_token: 884737,
    order_type: "LIMIT",
    transaction_type: "BUY",
    validity: "DAY",
    validity_ttl: 0,
    product: "MIS",
    quantity: 1,
    disclosed_quantity: 0,
    price: 437.05,
    trigger_price: 0,
    average_price: 436.65,
    filled_quantity: 1,
    pending_quantity: 0,
    cancelled_quantity: 0,
    market_protection: 0,
    meta: {},
    tag: null,
    guid: "21529XNkBxHUUY8U54",
  },
  {
    placed_by: "YB9930",
    order_id: "221128100065860",
    exchange_order_id: "1300000000440849",
    parent_order_id: null,
    status: "COMPLETE",
    status_message: null,
    status_message_raw: null,
    order_timestamp: "2022-11-28 09:16:00",
    exchange_update_timestamp: "2022-11-28 09:16:00",
    exchange_timestamp: "2022-11-28 09:16:00",
    variety: "regular",
    modified: false,
    exchange: "NSE",
    tradingsymbol: "SBIN",
    instrument_token: 779521,
    order_type: "LIMIT",
    transaction_type: "SELL",
    validity: "DAY",
    validity_ttl: 0,
    product: "MIS",
    quantity: 1,
    disclosed_quantity: 0,
    price: 606.35,
    trigger_price: 0,
    average_price: 606.35,
    filled_quantity: 1,
    pending_quantity: 0,
    cancelled_quantity: 0,
    market_protection: 0,
    meta: {},
    tag: null,
    guid: "21529XlBSb1KG3YIsO",
  },
];

exports.testManipulation = () => {
  const stopLoss = 0.05;
  const bufferAmount = 0.05;
  results.forEach((result) => {
    if (result.status === "COMPLETE") {
      let tmpJson = {};
      let lastPrice = result.average_price;
      tmpJson.symbol = result.tradingsymbol;
      tmpJson.qty = result.quantity;
      tmpJson.order = "SL";
      if (result.transaction_type === "BUY") {
        let tempTriggerPrice = lastPrice - (lastPrice * stopLoss) / 100;
        let triggerPrice = roundDownCalcualtion(tempTriggerPrice);
        tmpJson.stopLossTrigger = triggerPrice;
        tmpJson.orderType = "short";
        let tmpLimitPrice = triggerPrice - (triggerPrice * bufferAmount) / 100;
        let limitPrice = roundUpCalcualtion(tmpLimitPrice);
        tmpJson.price = limitPrice;
        //SELL
      } else {
        let tempTriggerPrice = lastPrice + (lastPrice * stopLoss) / 100;
        let triggerPrice = roundUpCalcualtion(tempTriggerPrice);
        tmpJson.stopLossTrigger = triggerPrice;
        tmpJson.orderType = "long";
        let tmpLimitPrice = triggerPrice + (triggerPrice * bufferAmount) / 100;
        let limitPrice = roundDownCalcualtion(tmpLimitPrice);
        tmpJson.price = limitPrice;
        //BUY
      }
      console.log(tmpJson);
    }
  });
};
